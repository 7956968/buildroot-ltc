<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ISP DDK: The MMU page table manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="open-sans-font.css" rel="stylesheet" type="text/css" />
<link href="IMGdoxygen.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="img.ico">
</head>
<body>
<div id="HeaderContainer">
    <div id="Header">
        <div id="HeaderContent">
            <div id="HeaderLogo">
                <a href="../../index.html"><img src="doc-logo.png" /></a>
            </div>
            <div id="ProjectName">
                ISP DDK
            </div>
        </div>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div id="MSearchBoxContainer">
          <img id="MSearchSelect" src="search.png" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" alt="">
          <input type="text" id="MSearchField" value="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
          <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
              <img id="MSearchCloseImg" border="0" src="search/close.png" alt="">
          </a>
          </div>
        </div>
      <div class="clearer"></div>
    </div>
</div>
<div id="NavContainer">
<nav>
    <ul>
        <li><a href="../index.html">Documents</a></li>
        <li id="NavCurrent"><a href="index.html">Source</a>
        <ul>
          <li><a href="pages.html">Related pages</a></li>
          <li><a href="modules.html">Modules</a></li>
          <li><a href="namespaces.html">Namespaces</a></li>
          <li><a href="annotated.html">Data structures</a></li>
          <li><a href="files.html">Files</a></li>
        </ul>
        </li>
    </ul>
</nav>
<div class="clearer"></div>
</div>
<div id="Content">
<div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">The MMU page table manager</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Memory Mapping Unit page table manager library handles the memory hierarchy for a multi-directory MMU.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___i_m_g_m_m_u__heap"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__heap.html">MMU Heap Interface</a></td></tr>
<tr class="memdesc:group___i_m_g_m_m_u__heap"><td class="mdescLeft">&#160;</td><td class="mdescRight">The API for the device virtual address Heap - must be implemented (see <a class="el" href="tal__heap_8c.html" title="Implementation of the MMU library heap using TAL. ">tal_heap.c</a> for an example implementation) <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___i_m_g_m_m_u___t_a_l_a_l_l_o_c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u___t_a_l_a_l_l_o_c.html">TAL Allocator</a></td></tr>
<tr class="memdesc:group___i_m_g_m_m_u___t_a_l_a_l_l_o_c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TAL implementation of the MMU allocator. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_m_u_info.html">MMUInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_m_u_page.html">MMUPage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page table entry - used when allocating the MMU pages.  <a href="struct_m_m_u_page.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac23ad89440ec91e8f860c9b67bffb405"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a>&#160;&#160;&#160;22</td></tr>
<tr class="memdesc:gac23ad89440ec91e8f860c9b67bffb405"><td class="mdescLeft">&#160;</td><td class="mdescRight">should be log2(IMGMMU_PAGE_SIZE)*2-2  <a href="#gac23ad89440ec91e8f860c9b67bffb405">More...</a><br/></td></tr>
<tr class="separator:gac23ad89440ec91e8f860c9b67bffb405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b9891501fa3ba9ad8944f08328b26ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga7b9891501fa3ba9ad8944f08328b26ad">IMGMMU_N_PAGE</a>&#160;&#160;&#160;(<a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a>/4u)</td></tr>
<tr class="memdesc:ga7b9891501fa3ba9ad8944f08328b26ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of page mapping in the pagetable  <a href="#ga7b9891501fa3ba9ad8944f08328b26ad">More...</a><br/></td></tr>
<tr class="separator:ga7b9891501fa3ba9ad8944f08328b26ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42e06d4914e5c03a115ada4ecaa24e37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga42e06d4914e5c03a115ada4ecaa24e37">IMGMMU_N_TABLE</a>&#160;&#160;&#160;(<a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a>/4u)</td></tr>
<tr class="memdesc:ga42e06d4914e5c03a115ada4ecaa24e37"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of pagetable that can be stored in the directory entry  <a href="#ga42e06d4914e5c03a115ada4ecaa24e37">More...</a><br/></td></tr>
<tr class="separator:ga42e06d4914e5c03a115ada4ecaa24e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b616f15719dbf6476700600acb34c64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:ga8b616f15719dbf6476700600acb34c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">should be log2(IMGMMU_PAGE_SIZE)  <a href="#ga8b616f15719dbf6476700600acb34c64">More...</a><br/></td></tr>
<tr class="separator:ga8b616f15719dbf6476700600acb34c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15acf186361d3e3970a53a53d6d31155"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a>&#160;&#160;&#160;4096u</td></tr>
<tr class="memdesc:ga15acf186361d3e3970a53a53d6d31155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page size in bytes.  <a href="#ga15acf186361d3e3970a53a53d6d31155">More...</a><br/></td></tr>
<tr class="separator:ga15acf186361d3e3970a53a53d6d31155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45bde5d372fb11a1311dff5bed90c4d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga45bde5d372fb11a1311dff5bed90c4d1">IMGMMU_PHYS_SIZE</a>&#160;&#160;&#160;40</td></tr>
<tr class="memdesc:ga45bde5d372fb11a1311dff5bed90c4d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMU physical address size in bits.  <a href="#ga45bde5d372fb11a1311dff5bed90c4d1">More...</a><br/></td></tr>
<tr class="separator:ga45bde5d372fb11a1311dff5bed90c4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f91308471e307e671e70e9c97205538"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga7f91308471e307e671e70e9c97205538">IMGMMU_VIRT_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga7f91308471e307e671e70e9c97205538"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMU virtual address size in bits.  <a href="#ga7f91308471e307e671e70e9c97205538">More...</a><br/></td></tr>
<tr class="separator:ga7f91308471e307e671e70e9c97205538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaa6a378499501ad8c66189835a611e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gacaa6a378499501ad8c66189835a611e4">MMU_FLAG_INVALID</a>&#160;&#160;&#160;0x0</td></tr>
<tr class="memdesc:gacaa6a378499501ad8c66189835a611e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory flag used to mark a page mapping as valid.  <a href="#gacaa6a378499501ad8c66189835a611e4">More...</a><br/></td></tr>
<tr class="separator:gacaa6a378499501ad8c66189835a611e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a0c9b1c9d11ac6d627cc9df4c483586"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga6a0c9b1c9d11ac6d627cc9df4c483586">MMU_FLAG_VALID</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="memdesc:ga6a0c9b1c9d11ac6d627cc9df4c483586"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory flag used to mark a page mapping as valid.  <a href="#ga6a0c9b1c9d11ac6d627cc9df4c483586">More...</a><br/></td></tr>
<tr class="separator:ga6a0c9b1c9d11ac6d627cc9df4c483586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79672f8dd77d141d5b9b628a3eb6375e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga79672f8dd77d141d5b9b628a3eb6375e">MMU_LogDebug</a>(...)</td></tr>
<tr class="separator:ga79672f8dd77d141d5b9b628a3eb6375e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0744cd59fb3bf79f9d493327d02248c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gad0744cd59fb3bf79f9d493327d02248c">MMU_LogError</a>(...)&#160;&#160;&#160;<a class="el" href="group___i_m_g_m_m_u__lib.html#ga89d4f2e6141335f267e251dc9a8bdf6c">_MMU_Log</a>(1, __FUNCTION__, __LINE__, __VA_ARGS__)</td></tr>
<tr class="separator:gad0744cd59fb3bf79f9d493327d02248c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga89d4f2e6141335f267e251dc9a8bdf6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga89d4f2e6141335f267e251dc9a8bdf6c">_MMU_Log</a> (int err, const char *function, <a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a> line, const char *format,...)</td></tr>
<tr class="memdesc:ga89d4f2e6141335f267e251dc9a8bdf6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to stderr (or KRN_ERR if in kernel module)  <a href="#ga89d4f2e6141335f267e251dc9a8bdf6c">More...</a><br/></td></tr>
<tr class="separator:ga89d4f2e6141335f267e251dc9a8bdf6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga7e7fea5a96ca2be9caf91802883c5133"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga7e7fea5a96ca2be9caf91802883c5133">MMU_DIR_SHIFT</a> = <a class="el" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a></td></tr>
<tr class="separator:ga7e7fea5a96ca2be9caf91802883c5133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81321ad809e7a06433c2fc8d9c675728"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga81321ad809e7a06433c2fc8d9c675728">MMU_PAGE_SHIFT</a> = <a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a></td></tr>
<tr class="separator:ga81321ad809e7a06433c2fc8d9c675728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga402d77a58e07d3da1d8d77dc7f93f895"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga402d77a58e07d3da1d8d77dc7f93f895">MMU_PAGE_SIZE</a> = <a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a></td></tr>
<tr class="separator:ga402d77a58e07d3da1d8d77dc7f93f895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bffe73b4238d119a107f65e0fedbd94"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga2bffe73b4238d119a107f65e0fedbd94">VIRT_DIR_IDX_MASK</a> = (~((1 &lt;&lt; <a class="el" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a>) - 1))</td></tr>
<tr class="memdesc:ga2bffe73b4238d119a107f65e0fedbd94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory index mask in virtual address - high bits.  <a href="#ga2bffe73b4238d119a107f65e0fedbd94">More...</a><br/></td></tr>
<tr class="separator:ga2bffe73b4238d119a107f65e0fedbd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc2b7dfca131882b0c9fedbdc6dd0475"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gafc2b7dfca131882b0c9fedbdc6dd0475">VIRT_PAGE_OFF_MASK</a> = ((1 &lt;&lt; <a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a>) - 1)</td></tr>
<tr class="memdesc:gafc2b7dfca131882b0c9fedbdc6dd0475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page offset mask in virtual address - bottom bits.  <a href="#gafc2b7dfca131882b0c9fedbdc6dd0475">More...</a><br/></td></tr>
<tr class="separator:gafc2b7dfca131882b0c9fedbdc6dd0475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga86e8e828f39ff25cb7e86aa330994621"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga86e8e828f39ff25cb7e86aa330994621">VIRT_PAGE_TBL_MASK</a></td></tr>
<tr class="memdesc:ga86e8e828f39ff25cb7e86aa330994621"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page table index mask in virtual address - middle bits.  <a href="#ga86e8e828f39ff25cb7e86aa330994621">More...</a><br/></td></tr>
<tr class="separator:ga86e8e828f39ff25cb7e86aa330994621"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
MMU page table management</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpd4da591bb701153395ab14ab441f3243"></a>The public functions to use to control the MMU.</p>
<div class="image">
<img src="MMU_class.png" alt="MMU_class.png"/>
<div class="caption">
MMU structure organisation</div></div>
</td></tr>
<tr class="memitem:gab7488394cd7a492d59455088e11e3e94"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gab7488394cd7a492d59455088e11e3e94">IMGMMU_pfnPageAlloc</a> )(void)</td></tr>
<tr class="memdesc:gab7488394cd7a492d59455088e11e3e94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a function implemented by the used allocator to create 1 page table (used for the MMU mapping - directory page and mapping page)  <a href="#gab7488394cd7a492d59455088e11e3e94">More...</a><br/></td></tr>
<tr class="separator:gab7488394cd7a492d59455088e11e3e94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43d1d696abdd2413b86cbe95d3b03a56"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga43d1d696abdd2413b86cbe95d3b03a56">IMGMMU_pfnPageFree</a> )(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *)</td></tr>
<tr class="memdesc:ga43d1d696abdd2413b86cbe95d3b03a56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a function to free the allocated page table used for MMU mapping.  <a href="#ga43d1d696abdd2413b86cbe95d3b03a56">More...</a><br/></td></tr>
<tr class="separator:ga43d1d696abdd2413b86cbe95d3b03a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b1a0a1c639a83d8d5263c902b256a28"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b1a0a1c639a83d8d5263c902b256a28">IMGMMU_pfnPageUpdateDevice</a> )(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *)</td></tr>
<tr class="memdesc:ga8b1a0a1c639a83d8d5263c902b256a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a function to update Device memory on non Unified Memory.  <a href="#ga8b1a0a1c639a83d8d5263c902b256a28">More...</a><br/></td></tr>
<tr class="separator:ga8b1a0a1c639a83d8d5263c902b256a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea9da623b261a8f235735df71dcb53bc"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gaea9da623b261a8f235735df71dcb53bc">IMGMMU_pfnPageWrite</a> )(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *pWriteTo, unsigned int offset, <a class="el" href="c99_2img__systypes_8h.html#a48056a52cf37d4ff43e300cd91b8ca25">IMG_UINT64</a> uiToWrite, unsigned int flags)</td></tr>
<tr class="memdesc:gaea9da623b261a8f235735df71dcb53bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to a device address.  <a href="#gaea9da623b261a8f235735df71dcb53bc">More...</a><br/></td></tr>
<tr class="separator:gaea9da623b261a8f235735df71dcb53bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c3a2371ba6fe18fae9c0ff43a8c9001"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga2c3a2371ba6fe18fae9c0ff43a8c9001">IMGMMU_pfnPageRead</a> )(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *pReadFrom, unsigned int offset)</td></tr>
<tr class="memdesc:ga2c3a2371ba6fe18fae9c0ff43a8c9001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 32 word on a physical page.  <a href="#ga2c3a2371ba6fe18fae9c0ff43a8c9001">More...</a><br/></td></tr>
<tr class="separator:ga2c3a2371ba6fe18fae9c0ff43a8c9001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3eb4ab0a02cbff5e158aad0b2f33c62"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_m_m_u_info.html">MMUInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gac3eb4ab0a02cbff5e158aad0b2f33c62">IMGMMU_Info</a></td></tr>
<tr class="separator:gac3eb4ab0a02cbff5e158aad0b2f33c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa56dc99e64936833ac05c7aca6b59a64"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gaa56dc99e64936833ac05c7aca6b59a64">IMGMMU_Page</a></td></tr>
<tr class="memdesc:gaa56dc99e64936833ac05c7aca6b59a64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page table entry - used when allocating the MMU pages.  <a href="#gaa56dc99e64936833ac05c7aca6b59a64">More...</a><br/></td></tr>
<tr class="separator:gaa56dc99e64936833ac05c7aca6b59a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93794fb886b26bd0dc0d81a4c8302df1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga93794fb886b26bd0dc0d81a4c8302df1">IMGMMU_GetPageSize</a> (void)</td></tr>
<tr class="memdesc:ga93794fb886b26bd0dc0d81a4c8302df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the compilation specified page size of the MMU (in Bytes)  <a href="#ga93794fb886b26bd0dc0d81a4c8302df1">More...</a><br/></td></tr>
<tr class="separator:ga93794fb886b26bd0dc0d81a4c8302df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga407ed1a79cc38d6dfce3c9c48e83dbe4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga407ed1a79cc38d6dfce3c9c48e83dbe4">IMGMMU_GetPhysicalSize</a> (void)</td></tr>
<tr class="memdesc:ga407ed1a79cc38d6dfce3c9c48e83dbe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the compilation specified physical size of the MMU (in bits)  <a href="#ga407ed1a79cc38d6dfce3c9c48e83dbe4">More...</a><br/></td></tr>
<tr class="separator:ga407ed1a79cc38d6dfce3c9c48e83dbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97917e393089d962aa90712bba4c2db9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga97917e393089d962aa90712bba4c2db9">IMGMMU_GetVirtualSize</a> (void)</td></tr>
<tr class="memdesc:ga97917e393089d962aa90712bba4c2db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the compilation specified virtual address size of the MMU (in bits)  <a href="#ga97917e393089d962aa90712bba4c2db9">More...</a><br/></td></tr>
<tr class="separator:ga97917e393089d962aa90712bba4c2db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39e77198e4703ab4fe7d5d98bcd7c393"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga39e77198e4703ab4fe7d5d98bcd7c393">IMGMMU_GetCPUPageSize</a> (void)</td></tr>
<tr class="memdesc:ga39e77198e4703ab4fe7d5d98bcd7c393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the CPU page size - similar to PAGE_SIZE macro in Linux.  <a href="#ga39e77198e4703ab4fe7d5d98bcd7c393">More...</a><br/></td></tr>
<tr class="separator:ga39e77198e4703ab4fe7d5d98bcd7c393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga262be1177bc3f6d18c377bd450e20734"><td class="memItemLeft" align="right" valign="top"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga262be1177bc3f6d18c377bd450e20734">IMGMMU_SetCPUPageSize</a> (<a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> pagesize)</td></tr>
<tr class="memdesc:ga262be1177bc3f6d18c377bd450e20734"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change run-time CPU page size.  <a href="#ga262be1177bc3f6d18c377bd450e20734">More...</a><br/></td></tr>
<tr class="separator:ga262be1177bc3f6d18c377bd450e20734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09534ade85021c0d25ac7210d6202ef0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga09534ade85021c0d25ac7210d6202ef0">IMGMMU_DirectoryCreate</a> (const <a class="el" href="group___i_m_g_m_m_u__lib.html#gac3eb4ab0a02cbff5e158aad0b2f33c62">IMGMMU_Info</a> *pMMUFunctions, <a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> *pResult)</td></tr>
<tr class="memdesc:ga09534ade85021c0d25ac7210d6202ef0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a directory entry based on a given directory configuration.  <a href="#ga09534ade85021c0d25ac7210d6202ef0">More...</a><br/></td></tr>
<tr class="separator:ga09534ade85021c0d25ac7210d6202ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b623d0b601408fe130138816173db6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga3b623d0b601408fe130138816173db6e">IMGMMU_DirectoryDestroy</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectory)</td></tr>
<tr class="memdesc:ga3b623d0b601408fe130138816173db6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the <a class="el" href="struct_m_m_u_directory.html" title="Directory entry in the MMU - contains several page mapping. ">MMUDirectory</a> - assumes that the HW is not going to access the memory any-more.  <a href="#ga3b623d0b601408fe130138816173db6e">More...</a><br/></td></tr>
<tr class="separator:ga3b623d0b601408fe130138816173db6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8522cfa3ec6abb0466877f5cf88cc822"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i_m_g_m_m_u__lib.html#gaa56dc99e64936833ac05c7aca6b59a64">IMGMMU_Page</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga8522cfa3ec6abb0466877f5cf88cc822">IMGMMU_DirectoryGetPage</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectory)</td></tr>
<tr class="memdesc:ga8522cfa3ec6abb0466877f5cf88cc822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get access to the page table structure used in the directory (to be able to write it to registers)  <a href="#ga8522cfa3ec6abb0466877f5cf88cc822">More...</a><br/></td></tr>
<tr class="separator:ga8522cfa3ec6abb0466877f5cf88cc822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9937321c003563728a4dd1dffcca3f8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga9937321c003563728a4dd1dffcca3f8c">IMGMMU_DirectoryGetDirectoryEntry</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectory, <a class="el" href="c99_2img__systypes_8h.html#a1a03c2490f0ee7227cecc2c7df4bfa20">IMG_UINTPTR</a> uiVirtualAddress)</td></tr>
<tr class="memdesc:ga9937321c003563728a4dd1dffcca3f8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the directory entry value associated with the virtual address.  <a href="#ga9937321c003563728a4dd1dffcca3f8c">More...</a><br/></td></tr>
<tr class="separator:ga9937321c003563728a4dd1dffcca3f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad08e38781d334db461193c08cf720ba8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gad08e38781d334db461193c08cf720ba8">IMGMMU_DirectoryGetPageTableEntry</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectory, <a class="el" href="c99_2img__systypes_8h.html#a1a03c2490f0ee7227cecc2c7df4bfa20">IMG_UINTPTR</a> uiVirtualAddress)</td></tr>
<tr class="memdesc:gad08e38781d334db461193c08cf720ba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the page table entry value associated with the virtual address.  <a href="#gad08e38781d334db461193c08cf720ba8">More...</a><br/></td></tr>
<tr class="separator:gad08e38781d334db461193c08cf720ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5efe0c8b6eb1cf524f4c6d27dc679a70"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_m_m_u_mapping.html">MMUMapping</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#ga5efe0c8b6eb1cf524f4c6d27dc679a70">IMGMMU_DirectoryMap</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectoryEntry, <a class="el" href="c99_2img__systypes_8h.html#a48056a52cf37d4ff43e300cd91b8ca25">IMG_UINT64</a> *aPhysPageList, const struct <a class="el" href="struct_m_m_u_heap_alloc.html">MMUHeapAlloc</a> *pDevVirtAddr, unsigned int uiMapFlags, <a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> *pResult)</td></tr>
<tr class="memdesc:ga5efe0c8b6eb1cf524f4c6d27dc679a70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a PageTable mapping for a list of physical pages and device virtual address.  <a href="#ga5efe0c8b6eb1cf524f4c6d27dc679a70">More...</a><br/></td></tr>
<tr class="separator:ga5efe0c8b6eb1cf524f4c6d27dc679a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7a629e851aefc8e99cc3d8d9782315e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gad7a629e851aefc8e99cc3d8d9782315e">IMGMMU_DirectoryUnMap</a> (struct <a class="el" href="struct_m_m_u_mapping.html">MMUMapping</a> *pMapping)</td></tr>
<tr class="memdesc:gad7a629e851aefc8e99cc3d8d9782315e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Un-map the mapped pages (invalidate their entries) and destroy the mapping object.  <a href="#gad7a629e851aefc8e99cc3d8d9782315e">More...</a><br/></td></tr>
<tr class="separator:gad7a629e851aefc8e99cc3d8d9782315e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb47d2923dad9284687426d5ff249fcc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g_m_m_u__lib.html#gacb47d2923dad9284687426d5ff249fcc">IMGMMU_DirectoryClean</a> (struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *pDirectory)</td></tr>
<tr class="memdesc:gacb47d2923dad9284687426d5ff249fcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the internal Page Table structures and physical pages that have no mapping attached to them.  <a href="#gacb47d2923dad9284687426d5ff249fcc">More...</a><br/></td></tr>
<tr class="separator:gacb47d2923dad9284687426d5ff249fcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Memory Mapping Unit page table manager library handles the memory hierarchy for a multi-directory MMU. </p>
<p>The library is composed of several elements: </p>
<ul>
<li>the Page Table management, responsible for managing the device memory used for the mapping. This requires some functions from the Allocator to access the memory and a virtual address from a Heap. </li>
<li>the Heap interface, that is the SW heap API one can re-implement (or use the provided TAL one). This is responsible for choosing a virtual address for an allocation. </li>
<li>the Allocator, that is not implemented in this library, is responsible for providing physical pages list (when mapping) and a few memory operation functions (IMGMMU_Info). An example TAL allocator is provided in this code and can be used when running in full user-space with pdumps.</li>
</ul>
<p>Some pre-processor values can be defined to customise the MMU: </p>
<ul>
<li>IMGMMU_PHYS_SIZE physical address size of the MMU in bits (default: 40)<ul>
<li>only used for the default memory write function </li>
</ul>
</li>
<li>IMGMMU_PAGE_SIZE page size in bytes (default: 4096) - not used directly in the MMU code, but the allocator should take it into account If IMGMMU_PAGE_SIZE is defined the following HAVE TO be defined as well: </li>
<li>IMGMMU_PAGE_SHIFT as log2(IMGMMU_PAGE_SIZE) (default: 12) - used in virtual address to determine the position of the page offset </li>
<li>IMGMMU_DIR_SHIFT as log2(IMGMMU_PAGE_SIZE)*2-2 (default: 22) - used in virtual address to determine the position of the directory offset</li>
</ul>
<p>Uses IMG_KERNEL_MODULE to know if currently in kernel code or not when printing errors and accessing PAGE_SIZE. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gac23ad89440ec91e8f860c9b67bffb405"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_DIR_SHIFT&#160;&#160;&#160;22</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>should be log2(IMGMMU_PAGE_SIZE)*2-2 </p>

</div>
</div>
<a class="anchor" id="ga7b9891501fa3ba9ad8944f08328b26ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_N_PAGE&#160;&#160;&#160;(<a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a>/4u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum number of page mapping in the pagetable </p>

</div>
</div>
<a class="anchor" id="ga42e06d4914e5c03a115ada4ecaa24e37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_N_TABLE&#160;&#160;&#160;(<a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a>/4u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum number of pagetable that can be stored in the directory entry </p>

</div>
</div>
<a class="anchor" id="ga8b616f15719dbf6476700600acb34c64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_PAGE_SHIFT&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>should be log2(IMGMMU_PAGE_SIZE) </p>

</div>
</div>
<a class="anchor" id="ga15acf186361d3e3970a53a53d6d31155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_PAGE_SIZE&#160;&#160;&#160;4096u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Page size in bytes. </p>

</div>
</div>
<a class="anchor" id="ga45bde5d372fb11a1311dff5bed90c4d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_PHYS_SIZE&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMU physical address size in bits. </p>

</div>
</div>
<a class="anchor" id="ga7f91308471e307e671e70e9c97205538"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMGMMU_VIRT_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMU virtual address size in bits. </p>

</div>
</div>
<a class="anchor" id="gacaa6a378499501ad8c66189835a611e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMU_FLAG_INVALID&#160;&#160;&#160;0x0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory flag used to mark a page mapping as valid. </p>

</div>
</div>
<a class="anchor" id="ga6a0c9b1c9d11ac6d627cc9df4c483586"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMU_FLAG_VALID&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory flag used to mark a page mapping as valid. </p>

</div>
</div>
<a class="anchor" id="ga79672f8dd77d141d5b9b628a3eb6375e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMU_LogDebug</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gad0744cd59fb3bf79f9d493327d02248c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMU_LogError</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group___i_m_g_m_m_u__lib.html#ga89d4f2e6141335f267e251dc9a8bdf6c">_MMU_Log</a>(1, __FUNCTION__, __LINE__, __VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gac3eb4ab0a02cbff5e158aad0b2f33c62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_m_m_u_info.html">MMUInfo</a>  <a class="el" href="group___i_m_g_m_m_u__lib.html#gac3eb4ab0a02cbff5e158aad0b2f33c62">IMGMMU_Info</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Description of the virtual address (examples are for the typical 4kBytes page): <ul>
<li>the size is given by ui32VirtAddrSize (e.g. 32) </li>
<li>the MSB are the directory index, they are between ui32DirShift and ui32VirtAddrSize (e.g. dir shift = 22, bits 22 to 31 is directory index) </li>
<li>the "middle bits" are the page table index, they are between ui32PageShift and ui32DirShift (e.g. page table index = 12, bits 12 to 21 is the page table index) </li>
<li>the LSB are the offset in the page (bits 0 to 11) </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="gaa56dc99e64936833ac05c7aca6b59a64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a>  <a class="el" href="group___i_m_g_m_m_u__lib.html#gaa56dc99e64936833ac05c7aca6b59a64">IMGMMU_Page</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Page table entry - used when allocating the MMU pages. </p>

</div>
</div>
<a class="anchor" id="gab7488394cd7a492d59455088e11e3e94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a>*(* IMGMMU_pfnPageAlloc)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to a function implemented by the used allocator to create 1 page table (used for the MMU mapping - directory page and mapping page) </p>
<p>This is not done internally to allow the usage of different allocators</p>
<dl class="section return"><dt>Returns</dt><dd>A populated <a class="el" href="struct_m_m_u_page.html" title="Page table entry - used when allocating the MMU pages. ">MMUPage</a> structure with the result of the page allocation </dd>
<dd>
NULL if the allocation failed</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group___i_m_g_m_m_u__lib.html#ga43d1d696abdd2413b86cbe95d3b03a56" title="Pointer to a function to free the allocated page table used for MMU mapping. ">IMGMMU_pfnPageFree</a> to liberate the page </dd></dl>

</div>
</div>
<a class="anchor" id="ga43d1d696abdd2413b86cbe95d3b03a56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* IMGMMU_pfnPageFree)(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to a function to free the allocated page table used for MMU mapping. </p>
<p>This is not done internally to allow the usage of different allocators</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group___i_m_g_m_m_u__lib.html#gab7488394cd7a492d59455088e11e3e94" title="Pointer to a function implemented by the used allocator to create 1 page table (used for the MMU mapp...">IMGMMU_pfnPageAlloc</a> to allocate the page </dd></dl>

</div>
</div>
<a class="anchor" id="ga2c3a2371ba6fe18fae9c0ff43a8c9001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>(* IMGMMU_pfnPageRead)(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *pReadFrom, unsigned int offset)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 32 word on a physical page. </p>
<p>This is used only when debug operations occures (e.g. access page table entry that caused a page fault)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pReadFrom</td><td>physical page - asserts it is not NULL </td></tr>
    <tr><td class="paramname">offset</td><td>in entries (32b word) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8b1a0a1c639a83d8d5263c902b256a28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* IMGMMU_pfnPageUpdateDevice)(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to a function to update Device memory on non Unified Memory. </p>

</div>
</div>
<a class="anchor" id="gaea9da623b261a8f235735df71dcb53bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* IMGMMU_pfnPageWrite)(struct <a class="el" href="struct_m_m_u_page.html">MMUPage</a> *pWriteTo, unsigned int offset, <a class="el" href="c99_2img__systypes_8h.html#a48056a52cf37d4ff43e300cd91b8ca25">IMG_UINT64</a> uiToWrite, unsigned int flags)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to a device address. </p>
<p>This is not done internally to allow debug operations such a pdumping to occur</p>
<p>This function should do all the shifting and masking needed for the used MMU</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pWriteTo</td><td>page to update - asserts it is not NULL </td></tr>
    <tr><td class="paramname">offset</td><td>in entries (32b word) </td></tr>
    <tr><td class="paramname">uiToWrite</td><td>physical address to write </td></tr>
    <tr><td class="paramname">flags</td><td>bottom part of the entry used as flags for the MMU (including valid flag) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga89d4f2e6141335f267e251dc9a8bdf6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _MMU_Log </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a>&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to stderr (or KRN_ERR if in kernel module) </p>

</div>
</div>
<a class="anchor" id="gacb47d2923dad9284687426d5ff249fcc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a> IMGMMU_DirectoryClean </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the internal Page Table structures and physical pages that have no mapping attached to them. </p>
<dl class="section note"><dt>Note</dt><dd>This function does not have to be used, but can be used to clean some un-used memory out and clean the Directory valid bits.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of clean directory entries </dd></dl>

</div>
</div>
<a class="anchor" id="ga09534ade85021c0d25ac7210d6202ef0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a>* IMGMMU_DirectoryCreate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___i_m_g_m_m_u__lib.html#gac3eb4ab0a02cbff5e158aad0b2f33c62">IMGMMU_Info</a> *&#160;</td>
          <td class="paramname"><em>pMMUFunctions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> *&#160;</td>
          <td class="paramname"><em>pResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a directory entry based on a given directory configuration. </p>
<dl class="section warning"><dt>Warning</dt><dd>Obviously creation of the directory allocates memory - do not call while interrupts are disabled</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMMUFunctions</td><td>is copied and not modified - contains the functions to use to manage page table memory </td></tr>
    <tr><td class="paramname">pResult</td><td>where to store the error code, should not be NULL (trapped by assert)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opaque handle to the <a class="el" href="struct_m_m_u_directory.html" title="Directory entry in the MMU - contains several page mapping. ">MMUDirectory</a> object and pResult to IMG_SUCCESS </dd>
<dd>
NULL in case of an error and pResult has the value: <ul>
<li>IMG_ERROR_INVALID_PARAMETERS if pDirectoryConfig is NULL or does not contain function pointers </li>
<li>IMG_ERROR_MALLOC_FAILED if an internal allocation failed </li>
<li>IMG_ERROR_FATAL if the given IMGMMU_pfnPageAlloc returned NULL </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ga3b623d0b601408fe130138816173db6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> IMGMMU_DirectoryDestroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the <a class="el" href="struct_m_m_u_directory.html" title="Directory entry in the MMU - contains several page mapping. ">MMUDirectory</a> - assumes that the HW is not going to access the memory any-more. </p>
<p>Does not invalidate any memory because it assumes that everything is not used any-more </p>

</div>
</div>
<a class="anchor" id="ga9937321c003563728a4dd1dffcca3f8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a> IMGMMU_DirectoryGetDirectoryEntry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c99_2img__systypes_8h.html#a1a03c2490f0ee7227cecc2c7df4bfa20">IMG_UINTPTR</a>&#160;</td>
          <td class="paramname"><em>uiVirtualAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the directory entry value associated with the virtual address. </p>
<dl class="section return"><dt>Returns</dt><dd>-1 if the Directory's pfnPageRead is NULL</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group___i_m_g_m_m_u__lib.html#gad08e38781d334db461193c08cf720ba8" title="Returns the page table entry value associated with the virtual address. ">IMGMMU_DirectoryGetPageTableEntry()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga8522cfa3ec6abb0466877f5cf88cc822"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___i_m_g_m_m_u__lib.html#gaa56dc99e64936833ac05c7aca6b59a64">IMGMMU_Page</a>* IMGMMU_DirectoryGetPage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get access to the page table structure used in the directory (to be able to write it to registers) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pDirectory</td><td>asserts if pDirectory is NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the page table structure used </dd></dl>

</div>
</div>
<a class="anchor" id="gad08e38781d334db461193c08cf720ba8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#afbbcd3ca36cd3bc43d459488cfb99071">IMG_UINT32</a> IMGMMU_DirectoryGetPageTableEntry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c99_2img__systypes_8h.html#a1a03c2490f0ee7227cecc2c7df4bfa20">IMG_UINTPTR</a>&#160;</td>
          <td class="paramname"><em>uiVirtualAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the page table entry value associated with the virtual address. </p>
<dl class="section return"><dt>Returns</dt><dd>-1 if the Directory's pfnPageRead is NULL or if the associate page table is invalid in the directory map</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group___i_m_g_m_m_u__lib.html#ga9937321c003563728a4dd1dffcca3f8c" title="Returns the directory entry value associated with the virtual address. ">IMGMMU_DirectoryGetDirectoryEntry()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga5efe0c8b6eb1cf524f4c6d27dc679a70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_m_m_u_mapping.html">MMUMapping</a>* IMGMMU_DirectoryMap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_directory.html">MMUDirectory</a> *&#160;</td>
          <td class="paramname"><em>pDirectoryEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c99_2img__systypes_8h.html#a48056a52cf37d4ff43e300cd91b8ca25">IMG_UINT64</a> *&#160;</td>
          <td class="paramname"><em>aPhysPageList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="struct_m_m_u_heap_alloc.html">MMUHeapAlloc</a> *&#160;</td>
          <td class="paramname"><em>pDevVirtAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiMapFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> *&#160;</td>
          <td class="paramname"><em>pResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a PageTable mapping for a list of physical pages and device virtual address. </p>
<dl class="section warning"><dt>Warning</dt><dd>Mapping can cause memory allocation (missing pages) - do not call while interrupts are disabled</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pDirectoryEntry</td><td>directory to use for the mapping </td></tr>
    <tr><td class="paramname">aPhysPageList</td><td>sorted array of physical addresses (ascending order). The number of elements is pDevVirtAddr-&gt;uiAllocSize/IMGMMU_GetCPUPageSize(). The device MMU page size <a class="el" href="group___i_m_g_m_m_u__lib.html#ga93794fb886b26bd0dc0d81a4c8302df1" title="Access the compilation specified page size of the MMU (in Bytes) ">IMGMMU_GetPageSize()</a> is used to know how many of the given addresses to generate when the device MMU page size is smaller than the CPU page size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>The function does not verify that the CPU page size is a multiple of the device page size. The user of that function should verify that beforehand as it is a SOC design decision. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This array can potentially be big, the caller may need to use vmalloc if running the linux kernel (e.g. mapping a 1080p NV12 is 760 entries, 6080 Bytes - 2 CPU pages needed, fine with kmalloc; 4k NV12 is 3038 entries, 24304 Bytes - 6 CPU pages needed, kmalloc would try to find 8 contiguous pages which may be problematic if memory is fragmented) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pDevVirtAddr</td><td>associated device virtual address. Given structure is copied </td></tr>
    <tr><td class="paramname">uiMapFlags</td><td>flags to apply on the page (typically 0x2 for Write Only, 0x4 for Read Only) - the flag should not set bit 1 as 0x1 is the valid flag. </td></tr>
    <tr><td class="paramname">pResult</td><td>where to store the error code, should not be NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opaque handle to the <a class="el" href="struct_m_m_u_mapping.html" title="Mapping a virtual address and some entries in a directory. ">MMUMapping</a> object and pResult to IMG_SUCCESS </dd>
<dd>
NULL in case of an error an pResult has the value: <ul>
<li>IMG_ERROR_INVALID_PARAMETERS if the allocation size is not a multiple of <a class="el" href="group___i_m_g_m_m_u__lib.html#ga93794fb886b26bd0dc0d81a4c8302df1" title="Access the compilation specified page size of the MMU (in Bytes) ">IMGMMU_GetPageSize()</a>, if the given list of page table is too long or not long enough for the mapping or if the give flags set the invalid bit </li>
<li>IMG_ERROR_MEMORY_IN_USE if the virtual memory is already mapped </li>
<li>IMG_ERROR_MALLOC_FAILED if an internal allocation failed </li>
<li>IMG_ERROR_FATAL if a page creation failed </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="gad7a629e851aefc8e99cc3d8d9782315e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> IMGMMU_DirectoryUnMap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_m_m_u_mapping.html">MMUMapping</a> *&#160;</td>
          <td class="paramname"><em>pMapping</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Un-map the mapped pages (invalidate their entries) and destroy the mapping object. </p>
<p>This does not destroy the created Page Table (even if they are becoming un-used) and does not change the Directory valid bits.</p>
<dl class="section return"><dt>Returns</dt><dd>IMG_SUCCESS </dd></dl>

</div>
</div>
<a class="anchor" id="ga39e77198e4703ab4fe7d5d98bcd7c393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> IMGMMU_GetCPUPageSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the CPU page size - similar to PAGE_SIZE macro in Linux. </p>
<p>Not directly using PAGE_SIZE because we need a run-time configuration of the PAGE_SIZE when running against simulators and different projects define PAGE_SIZE in different ways...</p>
<p>The default size is using the PAGE_SIZE macro if defined (or 4kB if not defined when running against simulators) </p>

</div>
</div>
<a class="anchor" id="ga93794fb886b26bd0dc0d81a4c8302df1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> IMGMMU_GetPageSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the compilation specified page size of the MMU (in Bytes) </p>

</div>
</div>
<a class="anchor" id="ga407ed1a79cc38d6dfce3c9c48e83dbe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> IMGMMU_GetPhysicalSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the compilation specified physical size of the MMU (in bits) </p>

</div>
</div>
<a class="anchor" id="ga97917e393089d962aa90712bba4c2db9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> IMGMMU_GetVirtualSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the compilation specified virtual address size of the MMU (in bits) </p>

</div>
</div>
<a class="anchor" id="ga262be1177bc3f6d18c377bd450e20734"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="img__types_8h.html#acbbd12329a0023857600682f4fdfc05c">IMG_RESULT</a> IMGMMU_SetCPUPageSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a>&#160;</td>
          <td class="paramname"><em>pagesize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change run-time CPU page size. </p>
<dl class="section warning"><dt>Warning</dt><dd>to use against simulators only! default of <a class="el" href="group___i_m_g_m_m_u__lib.html#ga39e77198e4703ab4fe7d5d98bcd7c393" title="Access the CPU page size - similar to PAGE_SIZE macro in Linux. ">IMGMMU_GetCPUPageSize()</a> is PAGE_SIZE otherwise! </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga7e7fea5a96ca2be9caf91802883c5133"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int MMU_DIR_SHIFT = <a class="el" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga81321ad809e7a06433c2fc8d9c675728"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int MMU_PAGE_SHIFT = <a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga402d77a58e07d3da1d8d77dc7f93f895"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> MMU_PAGE_SIZE = <a class="el" href="group___i_m_g_m_m_u__lib.html#ga15acf186361d3e3970a53a53d6d31155">IMGMMU_PAGE_SIZE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga2bffe73b4238d119a107f65e0fedbd94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> VIRT_DIR_IDX_MASK = (~((1 &lt;&lt; <a class="el" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a>) - 1))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Directory index mask in virtual address - high bits. </p>

</div>
</div>
<a class="anchor" id="gafc2b7dfca131882b0c9fedbdc6dd0475"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> VIRT_PAGE_OFF_MASK = ((1 &lt;&lt; <a class="el" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a>) - 1)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Page offset mask in virtual address - bottom bits. </p>

</div>
</div>
<a class="anchor" id="ga86e8e828f39ff25cb7e86aa330994621"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="c99_2img__systypes_8h.html#ad5f3a7e6e4536c6ad1e756b4f06ccecb">IMG_SIZE</a> VIRT_PAGE_TBL_MASK</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    (((1 &lt;&lt; <a class="code" href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a>) - 1) &amp; ~(((1 &lt;&lt; <a class="code" href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a>) - 1)))</div>
<div class="ttc" id="group___i_m_g_m_m_u__lib_html_gac23ad89440ec91e8f860c9b67bffb405"><div class="ttname"><a href="group___i_m_g_m_m_u__lib.html#gac23ad89440ec91e8f860c9b67bffb405">IMGMMU_DIR_SHIFT</a></div><div class="ttdeci">#define IMGMMU_DIR_SHIFT</div><div class="ttdoc">should be log2(IMGMMU_PAGE_SIZE)*2-2 </div><div class="ttdef"><b>Definition:</b> mmu_defs.h:59</div></div>
<div class="ttc" id="group___i_m_g_m_m_u__lib_html_ga8b616f15719dbf6476700600acb34c64"><div class="ttname"><a href="group___i_m_g_m_m_u__lib.html#ga8b616f15719dbf6476700600acb34c64">IMGMMU_PAGE_SHIFT</a></div><div class="ttdeci">#define IMGMMU_PAGE_SHIFT</div><div class="ttdoc">should be log2(IMGMMU_PAGE_SIZE) </div><div class="ttdef"><b>Definition:</b> mmu_defs.h:57</div></div>
</div><!-- fragment -->
<p>Page table index mask in virtual address - middle bits. </p>

</div>
</div>
</div><!-- contents -->

<div class="footer">
    &copy; Copyright 2016, Imagination Technologies.
</div>
<!-- Back-to-top -->
<a href="#" class="back-to-top">&#8593; TOP</a>
<script>            
    jQuery(document).ready(function() {
    var offset = 220;
        var duration = 500;
        jQuery(window).scroll(function() {
            if (jQuery(this).scrollTop() > offset) {
                jQuery('.back-to-top').fadeIn(duration);
            } else {
                jQuery('.back-to-top').fadeOut(duration);
            }
        });
        jQuery('.back-to-top').click(function(event) {
            event.preventDefault();
            jQuery('html, body').animate({scrollTop: 0}, duration);
            return false;
        })
    });
</script>
<!-- End Back-to-top -->
</body>
</html>
