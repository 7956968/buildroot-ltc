<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ISP Control video capture: ISPC_capture &mdash; ISP DDK 2.8.4 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fonts/open-sans/open-sans-font.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.8.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/img.ico"/>
    <link rel="top" title="ISP DDK 2.8.4 documentation" href="../index.html" />
    <link rel="up" title="Test Tools" href="test_tools.html" />
    <link rel="next" title="ISP Control HDR: ISPC_hdr" href="ispc_hdr.html" />
    <link rel="prev" title="ISPC loop application: ISPC_loop" href="ispc_loop.html" /> 
  </head>
  <body role="document">
<div id="HeaderContainer">
    <div id="Header">
        <div id="HeaderContent">
            <div id="HeaderLogo">
                <a href="../index.html"><img src="../_static/images/doc-logo.png" /></a>
            </div>
            <div id="ProjectName">
                ISP DDK
            </div>
        </div>
        <div id="searchbox">
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="12" />
              <input type="submit" value="">
            </form>
        </div>
      <div class="clearer"></div>
    </div>
</div>
<div id="NavContainer">
<nav>
    <ul>
        <li id="NavCurrent"><a href="../index.html">Documents</a></li>
        <li><a href="../index/../doxygen/index.html">Source</a>
        <ul>
          <li><a href="../index/../doxygen/pages.html">Related pages</a></li>
          <li><a href="../index/../doxygen/modules.html">Modules</a></li>
          <li><a href="../index/../doxygen/namespaces.html">Namespaces</a></li>
          <li><a href="../index/../doxygen/annotated.html">Data structures</a></li>
          <li><a href="../index/../doxygen/files.html">Files</a></li>
        </ul>
        </li>
    </ul>
</nav>

<div class="clearer"></div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ispc_hdr.html" title="ISP Control HDR: ISPC_hdr"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="ispc_loop.html" title="ISPC loop application: ISPC_loop"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="test_tools.html" accesskey="U">Test Tools</a> &raquo;</li><li>ISP Control video capture: <code class="docutils literal"><span class="pre">ISPC_capture</span></code></li>
      </ul>
    </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="isp-control-video-capture-ispc-capture">
<span id="isp-ispc-capture"></span><h1>ISP Control video capture: <code class="docutils literal"><span class="pre">ISPC_capture</span></code><a class="headerlink" href="#isp-control-video-capture-ispc-capture" title="Permalink to this headline">¶</a></h1>
<p>This test application was designed to capture RGGB videos using
Imagination&#8217;s FPGA system, the limitation being the small throughput when
accessing the device memory (limited to ~4MB/s). This application overcomes
this problem by allocating 1 buffer per required frame and not attempting to
access the memory until all the frames are captured.</p>
<p>The number of shots used to feed the HW is set to 2 by default but can be configured.</p>
<p>Obviously this application needs to use a real sensor.</p>
<p>The sources are available in <code class="docutils literal"><span class="pre">ISPControl/capture</span></code> and the executable in
installed in <code class="docutils literal"><span class="pre">ISPC/</span></code>.</p>
<div class="section" id="parameters">
<span id="isp-ispc-capture-parameters"></span><h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The parameters can be given by command line or in a configuration file.</p>
<p>The parameter types are:</p>
<ul class="simple">
<li><cite>Bool</cite>: a Boolean value of either 0 or 1</li>
<li><cite>Int</cite>/<cite>UInt</cite>: an integer (signed or unsigned is parameter specific)</li>
<li><cite>Cmd</cite>: command that act as a Boolean of value 1 if present, of value 0 if
not found</li>
<li><cite>Str</cite>: string or path</li>
<li><cite>Float</cite>: floating point number</li>
</ul>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">-source</span></code>:</dt>
<dd>Provide a file to parse for command line parameters. The latest given
parameter is used as the value for the option.</dd>
<dt><code class="docutils literal"><span class="pre">-h</span></code>:</dt>
<dd>Display the help and exit.</dd>
</dl>
<div class="section" id="required-parameters">
<span id="isp-ispc-capture-required-parameters"></span><h3>Required Parameters<a class="headerlink" href="#required-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">-sensor</span></code>: Str</dt>
<dd>Sensor name to use (one of the supported ones in sensor API).</dd>
<dt><code class="docutils literal"><span class="pre">-sensorMode</span></code>: UInt</dt>
<dd>Sensor running mode (chooses size and FPS for a given sensor).</dd>
<dt><code class="docutils literal"><span class="pre">-nFrames</span></code>: UInt</dt>
<dd>Number of frames to run for. The limit is the amount of memory available
to the device.</dd>
<dt><code class="docutils literal"><span class="pre">-nBuffers</span></code>: UInt</dt>
<dd>Number of buffers to be pushed into the HW linked list. Minimum of 1,
maximum of 16.</dd>
</dl>
</div>
<div class="section" id="optional-parameters">
<span id="isp-ispc-capture-optional-parameters"></span><h3>Optional Parameters<a class="headerlink" href="#optional-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">-sensorExposure</span></code>: UInt</dt>
<dd><p class="first">Forces the sensor exposure, unit is µs.</p>
<p class="last">If Auto Exposure is enabled used as initial exposure.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">-sensorGain</span></code>: Float</dt>
<dd><p class="first">Forces the sensor gain.</p>
<p class="last">If Auto Exposure is enabled used as initial gain.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">-sensorFlip</span></code>: Bool [x2]</dt>
<dd><p class="first">Flip the sensor horizontally and vertically. Not all sensor and modes
support that.</p>
<p class="last">If only 1 value is given it is assumed to be the horizontal flipping.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">-DEBitDepth</span></code>: UInt</dt>
<dd><p class="first">Data extraction bit depth to use (8b, 10b or 12b).</p>
<p class="last">Default is 10b.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">-output</span></code>: Str</dt>
<dd><p class="first">Name of the output file.</p>
<p class="last">Default is dataExtraction.flx</p>
</dd>
<dt><code class="docutils literal"><span class="pre">-concurrent</span></code>: Cmd</dt>
<dd><p class="first">Save the frames while they are captured with double buffering.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This may be slow if memory latency is high (can be used to test it).</p>
</div>
</dd>
<dt><code class="docutils literal"><span class="pre">-enableAE</span></code>: Float</dt>
<dd>Enable the auto exposure algorithm and sets its target brightness.</dd>
</dl>
</div>
</div>
<div class="section" id="behaviour">
<span id="isp-ispc-capture-behaviour"></span><h2>Behaviour<a class="headerlink" href="#behaviour" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal"><span class="pre">Camera</span></code> object will be configured to extract RGGB data from the 1st Data
Extraction point and the given number of frames will be allocated. If the
system does not have enough memory the application will fail at that point.</p>
<p>For example Imagination&#8217;s FPGA system uses 256MB of PCI carved-out memory.
This amount of memory allows us to capture around 190 720p frames at once
(258.375.680 Bytes are used). On our particular FPGA system where the memory
access is slow the capture took a couple dozen seconds while the saving took
a couple hundred.</p>
<p>The amount of buffers and shots allocated is always the number of frames as
they are accumulated until the end (unless using concurrent mode). However
the number of shots pushed to the HW linked list is configurable.</p>
<p>If the concurrent mode is used it will simply buffer multiple times in an attempt to
capture those frames. This may allow more frames to be captured but could
result in slower frame rate if the memory latency is high.</p>
</div>
<div class="section" id="expected-output">
<span id="isp-ispc-capture-expected-output"></span><h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this headline">¶</a></h2>
<p>The output file should be an FLX file with either a default file name or the one given.
If auto exposure was enabled it will also <code class="docutils literal"><span class="pre">save</span>
<span class="pre">sensor_info.txt</span></code> with the exposure/gain used per frame.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ISP Control video capture: <code class="docutils literal"><span class="pre">ISPC_capture</span></code></a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a><ul>
<li><a class="reference internal" href="#required-parameters">Required Parameters</a></li>
<li><a class="reference internal" href="#optional-parameters">Optional Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#behaviour">Behaviour</a></li>
<li><a class="reference internal" href="#expected-output">Expected Output</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ispc_loop.html"
                        title="previous chapter">ISPC loop application: <code class="docutils literal"><span class="pre">ISPC_loop</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ispc_hdr.html"
                        title="next chapter">ISP Control HDR: <code class="docutils literal"><span class="pre">ISPC_hdr</span></code></a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
        &copy; Imagination Technologies
    - Strictly Confidential - External
    <br>
     Built on Fri, 05 Aug 2016 13:03:49
    - Revision: <a href="#">4173926</a>
    - <a href="../index/../_pdf/manual.pdf">Printable version</a>
</div>

<!-- Embed tables in a scroller-div -->
<script type="text/javascript">
    $( "table.docutils" ).wrap( "<div class='docutils-scroller'></div>" );
</script>
<!-- End Embed tables in a scroller-div -->

<!-- Back-to-top -->
<a href="#" class="back-to-top">&#8593; TOP</a>
<script>            
    jQuery(document).ready(function() {
    var offset = 220;
        var duration = 500;
        jQuery(window).scroll(function() {
            if (jQuery(this).scrollTop() > offset) {
                jQuery('.back-to-top').fadeIn(duration);
            } else {
                jQuery('.back-to-top').fadeOut(duration);
            }
        });

        jQuery('.back-to-top').click(function(event) {
            event.preventDefault();
            jQuery('html, body').animate({scrollTop: 0}, duration);
            return false;
        })
    });
</script>
<!-- End Back-to-top -->
  </body>
</html>